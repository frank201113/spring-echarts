import*as t from"echarts";import e from"lodash/debounce";import{addListener as i,removeListener as s}from"resize-detector";const n=["theme","initOptions","autoresize"],h=["manualUpdate","watchShallow"];function o(t,e,i,s,n,h,o,r,a,d){"boolean"!=typeof o&&(a=r,r=o,o=!1);const c="function"==typeof i?i.options:i;let l;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,n&&(c.functional=!0)),s&&(c._scopeId=s),h?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,a(t)),t&&t._registeredComponents&&t._registeredComponents.add(h)},c._ssrRegister=l):e&&(l=o?function(t){e.call(this,d(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),l)if(c.functional){const t=c.render;c.render=function(e,i){return l.call(i),t(e,i)}}else{const t=c.beforeCreate;c.beforeCreate=t?[].concat(t,l):[l]}return i}const r={props:{options:Object,initOptions:Object,theme:[String,Object],group:String,autoresize:Boolean,watchShallow:Boolean,manualUpdate:Boolean,age:Number},data:()=>({lastArea:0}),watch:{group(t){this.chart.group=t}},methods:{mergeOptions(t,e,i){this.manualUpdate&&(this.manualOptions=t),this.chart?this.delegateMethod("setOption",t,e,i):this.init(t)},appendData(t){this.delegateMethod("appendData",t)},resize(t){this.delegateMethod("resize",t)},dispatchAction(t){this.delegateMethod("dispatchAction",t)},convertToPixel(t,e){return this.delegateMethod("convertToPixel",t,e)},convertFromPixel(t,e){return this.delegateMethod("convertFromPixel",t,e)},containPixel(t,e){return this.delegateMethod("containPixel",t,e)},showLoading(t,e){this.delegateMethod("showLoading",t,e)},hideLoading(){this.delegateMethod("hideLoading")},getDataURL(t){return this.delegateMethod("getDataURL",t)},getConnectedDataURL(t){return this.delegateMethod("getConnectedDataURL",t)},clear(){this.delegateMethod("clear")},dispose(){this.delegateMethod("dispose")},delegateMethod(t,...e){return this.chart||this.init(),this.chart[t](...e)},delegateGet(t){return this.chart||this.init(),this.chart[t]()},getArea(){return this.$el.offsetWidth*this.$el.offsetHeight},init(s){if(this.chart)return;const n=t.init(this.$el,this.theme,this.initOptions);this.group&&(n.group=this.group),n.setOption(s||this.manualOptions||this.options||{},!0),Object.keys(this.$listeners).forEach((t=>{const e=this.$listeners[t];0===t.indexOf("zr:")?n.getZr().on(t.slice(3),e):n.on(t,e)})),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=e((()=>{0===this.lastArea?(this.mergeOptions({},!0),this.resize(),this.mergeOptions(this.options||this.manualOptions||{},!0)):this.resize(),this.lastArea=this.getArea()}),100,{leading:!0}),i(this.$el,this.__resizeHandler)),Object.defineProperties(this,{width:{configurable:!0,get:()=>this.delegateGet("getWidth")},height:{configurable:!0,get:()=>this.delegateGet("getHeight")},isDisposed:{configurable:!0,get:()=>!!this.delegateGet("isDisposed")},computedOptions:{configurable:!0,get:()=>this.delegateGet("getOption")}}),this.chart=n},initOptionsWatcher(){this.__unwatchOptions&&(this.__unwatchOptions(),this.__unwatchOptions=null),this.manualUpdate||(this.__unwatchOptions=this.$watch("options",((t,e)=>{!this.chart&&t?this.init():this.chart.setOption(t,t!==e)}),{deep:!this.watchShallow}))},destroy(){this.autoresize&&s(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh(){this.chart&&(this.destroy(),this.init())}},created(){this.initOptionsWatcher(),n.forEach((t=>{this.$watch(t,(()=>{this.refresh()}),{deep:!0})})),h.forEach((t=>{this.$watch(t,(()=>{this.initOptionsWatcher(),this.refresh()}))}))},mounted(){this.options&&this.init()},activated(){this.autoresize&&this.chart&&this.chart.resize()},destroyed(){this.chart&&this.destroy()},connect(e){"string"!=typeof e&&(e=e.map((t=>t.chart))),t.connect(e)},disconnect(e){t.disconnect(e)},getMap:e=>t.getMap(e),registerMap(e,i,s){t.registerMap(e,i,s)},registerTheme(e,i){t.registerTheme(e,i)},graphic:t.graphic};var a=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"spring-echarts"})};a._withStripped=!0;const d=o({render:a,staticRenderFns:[]},undefined,r,undefined,false,undefined,!1,void 0,void 0,void 0);export{d as default};
